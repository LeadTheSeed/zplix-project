# Niqati Platform System Architecture

```
+------------------------------------------------------------------------------------+
|                             NIQATI PLATFORM ARCHITECTURE                           |
+------------------------------------------------------------------------------------+

+----------------------+    +----------------------+    +----------------------+
|    CLIENT LAYER      |    |    PRESENTATION      |    |     API GATEWAY      |
|                      |    |       LAYER          |    |                      |
| +------------------+ |    | +------------------+ |    | +------------------+ |
| |   Web Frontend   | |    | |   REST API       | |    | |  Authentication  | |
| | (React/Next.js)  | |    | |   Endpoints      | |    | |   & Rate Limits  | |
| +------------------+ |    | +------------------+ |    | +------------------+ |
|                      |    |                      |    |                      |
| +------------------+ |    | +------------------+ |    | +------------------+ |
| | Mobile Apps      | |    | |   WebSocket      | |    | |   Request        | |
| | (React Native)   | |    | |   Server         | |    | |   Routing        | |
| +------------------+ |    | +------------------+ |    | +------------------+ |
|                      |    |                      |    |                      |
| +------------------+ |    | +------------------+ |    | +------------------+ |
| | Admin Dashboard  | |    | |   GraphQL API    | |    | |   Response       | |
| | (React)          | |    | |   (Optional)     | |    | |   Formatting     | |
| +------------------+ |    | +------------------+ |    | +------------------+ |
+----------------------+    +----------------------+    +----------------------+

+----------------------+    +----------------------+    +----------------------+
|    BUSINESS LAYER    |    |    CORE SERVICES     |    |    DATA ACCESS      |
|                      |    |                      |    |       LAYER         |
| +------------------+ |    | +------------------+ |    | +------------------+ |
| |  Points/USDT     | |    | |  User Service    | |    | |  Database       | |
| |  Conversion      | |    | |                  | |    | |  Repositories   | |
| +------------------+ |    | +------------------+ |    | +------------------+ |
|                      |    |                      |    |                      |
| +------------------+ |    | +------------------+ |    | +------------------+ |
| |  Order           | |    | |  Wallet Service  | |    | |  Caching        | |
| |  Processing      | |    | |                  | |    | |  Layer          | |
| +------------------+ |    | +------------------+ |    | +------------------+ |
|                      |    |                      |    |                      |
| +------------------+ |    | +------------------+ |    | +------------------+ |
| |  Payment         | |    | |  Blockchain      | |    | |  Transaction    | |
| |  Processing      | |    | |  Service         | |    | |  Management     | |
| +------------------+ |    | +------------------+ |    | +------------------+ |
|                      |    |                      |    |                      |
| +------------------+ |    | +------------------+ |    | +------------------+ |
| |  KYC / AML       | |    | |  Notification    | |    | |  Audit          | |
| |  Verification    | |    | |  Service         | |    | |  Logging        | |
| +------------------+ |    | +------------------+ |    | +------------------+ |
+----------------------+    +----------------------+    +----------------------+

+----------------------+    +----------------------+    +----------------------+
|   EXTERNAL SERVICES  |    |    INFRASTRUCTURE    |    |    SECURITY         |
|                      |    |                      |    |                      |
| +------------------+ |    | +------------------+ |    | +------------------+ |
| |  Payment         | |    | |  PostgreSQL      | |    | |  JWT            | |
| |  Gateways        | |    | |  Database        | |    | |  Authentication | |
| +------------------+ |    | +------------------+ |    | +------------------+ |
|                      |    |                      |    |                      |
| +------------------+ |    | +------------------+ |    | +------------------+ |
| |  Tron/Ethereum   | |    | |  Redis Cache     | |    | |  Data           | |
| |  Blockchain      | |    | |                  | |    | |  Encryption     | |
| +------------------+ |    | +------------------+ |    | +------------------+ |
|                      |    |                      |    |                      |
| +------------------+ |    | +------------------+ |    | +------------------+ |
| |  SMS/Email       | |    | |  RabbitMQ        | |    | |  2FA &          | |
| |  Providers       | |    | |  Message Queue   | |    | |  OTP System     | |
| +------------------+ |    | +------------------+ |    | +------------------+ |
|                      |    |                      |    |                      |
| +------------------+ |    | +------------------+ |    | +------------------+ |
| |  KYC Service     | |    | |  Docker &        | |    | |  Fraud          | |
| |  Providers       | |    | |  Kubernetes      | |    | |  Detection      | |
| +------------------+ |    | +------------------+ |    | +------------------+ |
+----------------------+    +----------------------+    +----------------------+

+------------------------------------------------------------------------------------+
|                              MONITORING & DEVOPS                                   |
| +------------------+ +------------------+ +------------------+ +------------------+ |
| |     Logging      | |     Metrics      | |     Alerts       | |    CI/CD         | |
| |   (ELK Stack)    | |  (Prometheus)    | |   (Grafana)      | |   Pipeline       | |
| +------------------+ +------------------+ +------------------+ +------------------+ |
+------------------------------------------------------------------------------------+
```

## Points-to-USDT Flow Diagram

```
+----------------+     +-----------------+     +-------------------+
|                |     |                 |     |                   |
| USER INTERFACE | --> | POINTS FACADE   | --> | USDT CORE ENGINE |
| (Points View)  |     | LAYER           |     |                  |
|                |     |                 |     |                   |
+----------------+     +-----------------+     +-------------------+
                              |                         |
                              |                         |
                              v                         v
                     +-----------------+      +-------------------+
                     |                 |      |                   |
                     | CONVERSION      |      | BLOCKCHAIN        |
                     | ENGINE          |      | INTEGRATION       |
                     |                 |      |                   |
                     +-----------------+      +-------------------+
                              |                         |
                              |                         |
                              v                         v
                     +-----------------+      +-------------------+
                     |                 |      |                   |
                     | LOCAL CURRENCY  |      | WALLET            |
                     | EXCHANGE RATE   |      | MANAGEMENT        |
                     |                 |      |                   |
                     +-----------------+      +-------------------+
```

## Bank Transfer Payment Flow (Phase 1)

```
+----------------+     +-----------------+     +-------------------+
|                |     |                 |     |                   |
| User Initiates | --> | System Creates  | --> | User Receives    |
| Points Purchase|     | Bank Transfer   |     | Payment          |
|                |     | Instructions    |     | Instructions     |
+----------------+     +-----------------+     +-------------------+
        |                      |                         |
        v                      v                         v
+----------------+     +-----------------+     +-------------------+
|                |     |                 |     |                   |
| User Makes     | --> | User Uploads    | --> | Admin Verifies   |
| Bank Transfer  |     | Transfer Proof  |     | Payment          |
|                |     |                 |     |                   |
+----------------+     +-----------------+     +-------------------+
                                                        |
                                                        v
                                              +-------------------+
                                              |                   |
                                              | System Credits    |
                                              | Points to User    |
                                              | Account           |
                                              +-------------------+
                                                        |
                                                        v
                                              +-------------------+
                                              |                   |
                                              | USDT Allocated    |
                                              | In Platform       |
                                              | Reserves          |
                                              +-------------------+
```

## Merchant Settlement Flow (USDT)

```
+----------------+     +-----------------+     +-------------------+
|                |     |                 |     |                   |
| User Purchases | --> | Points Debited  | --> | Platform Revenue |
| Digital Product|     | From User       |     | (5% Fee)         |
|                |     |                 |     |                   |
+----------------+     +-----------------+     +-------------------+
                                                        |
                                                        v
                                              +-------------------+
                                              |                   |
                                              | Merchant USDT     |
                                              | Accrual           |
                                              |                   |
                                              +-------------------+
                                                        |
                                                        v
                                              +-------------------+     +-------------------+
                                              |                   |     |                   |
                                              | USDT Settlement   | --> | Blockchain       |
                                              | To Merchant       |     | Transaction      |
                                              | (TRC-20)          |     | Confirmation     |
                                              +-------------------+     +-------------------+
```
